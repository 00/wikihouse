<%inherit file="base.tmpl"/>

<%def name="sub_title()"></%def>

<%def name="content()">
  <div class="super-graphic row">
    <div id="splash-container">
      <a href="#play-video" id="play-video">
        <div class="splash-text-container">
          <div class="splash-text">
            An Open Source Construction Set.
          </div>
        </div>
        <div class="splash-image-container">
          <img src="${get_static_url('gfx/wikihouse-mac.jpg')}" />
        </div>
      </a>
    </div>
    <div id="fitvid-container"></div>
  </div>
  <div class="row black-bg white-border-bottom">
    <div class="slot-12">
      <div class="challenge-header">
        <h2 class="challenge-heading">
          WikiHouse Open Challenge
        </h2>
        <p>
          WikiHouse is a non-profit project, developing hardware and software
          which is open and shared in the commons, owned by everyone. Help us
          build the project by co-funding
          <a href="http://www.slideshare.net/architecture00/wiki-house-openchallenge">
            the next development goals</a> &mdash;
          which are split into the three categories below. These are each
          individually fundable, so when you make a donation, your money will
          go directly towards funding the specific goal you choose.
        </p>
      </div>
    </div>
  </div>
  <!--
    
    Hidden phone
    
  -->
  <div class="hidden-phone">
    <div class="row black-bg">
      % for campaign in campaigns:
        <div class="challenge-pillar">
          <div class="challenge-pillar-inner">
            <div class="challenge-icon">
              <%
                path = 'gfx/icons/{0}.png'.format(campaign['category'])
                url = get_static_url(path)
              %>
              <img src="${url}" />
            </div>
            <h4 class="challenge-category">
              ${campaign['category'].title()}
            </h4>
            <h3 class="challenge-title">
              ${campaign['title']}
            </h3>
            <p class="challenge-description">
              ${campaign['description']}
            </p>
          </div>
        </div>
      % endfor
    </div>
    <div class="row black-bg">
      % for campaign in campaigns:
        <div class="challenge-pillar">
          <div class="challenge-pillar-inner">
            <div class="challenge-funding">
              <div class="challenge-indicator">
                <div class="indicator">
                  <div class="indicator-top-bar">
                  </div>
                  <%
                    container_height = 360
                    height = container_height * campaign['percentage_raised'] / 100
                    margin_top = container_height - height
                  %>
                  <div class="indicator-level"
                      data-percentage="${campaign['percentage_raised']}"
                      style="height: ${height}px; margin-top: ${margin_top}px">
                  </div>
                </div>
              </div>
              <div class="challenge-stats">
                <div class="challenge-stat">
                  <div class="challenge-stat-value">
                    ${campaign['num_backers']}
                  </div>
                  <div class="challenge-stat-label">
                    % if campaign['num_backers'] == 1:
                      Backer
                    % else:
                      Backers
                    % endif
                  </div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-value">
                    &pound;${campaign['total_raised']}
                  </div>
                  <div class="challenge-stat-label">
                    Funded
                  </div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-value">
                    &pound;${campaign['target']}
                  </div>
                  <div class="challenge-stat-label">
                    Target
                  </div>
                </div>
              </div>
            </div>
          </div>
          [ FUND THIS BUTTON ]
        </div>
      % endfor
    </div>
  </div>
  <!--
    
    Visible phone
    
    
  -->
  <div class="visible-phone">
    <div class="row black-bg">
      % for campaign in campaigns:
        <div class="challenge-pillar">
          <div class="challenge-pillar-inner">
            <div class="challenge-icon">
              <%
                path = 'gfx/icons/{0}.png'.format(campaign['category'])
                url = get_static_url(path)
              %>
              <img src="${url}" />
            </div>
            <h4 class="challenge-category">
              ${campaign['category'].title()}
            </h4>
            <h3 class="challenge-title">
              ${campaign['title']}
            </h3>
            <p class="challenge-description">
              ${campaign['description']}
            </p>
          </div>
          [ FUND THIS BUTTON ]
        </div>
      % endfor
    </div>
  </div>
  <div class="quotes border-bottom">
    <div class="quote-logos row border-bottom">
      <ul>
        <li class="as-featured-in">
          As featured in:
        </li>
        % for item in quotes:
          <li id="${item.key()}-quote-logo">
            <div class="quote-logo">
              % if item.href: 
                <a href="${item.href}" target="_blank">
                  <img src="${get_static_url('gfx/logos/logo.%s.png' % item.key().name())}" />
                </a>
              % else:
                <img src="${get_static_url('gfx/logos/logo.%s.png' % item.key().name())}" />
              % endif
            </div>
          </li>
        % endfor
      </ul>
    </div>
    <div class="quote-contents">
      % for item in quotes:
        <div data-quote-key="${item.key()}" class="quote-content">
          &ldquo;${_(item.content)}&rdquo;
        </div>
      % endfor
    </div>
  </div>
  <div class="row overflow-hidden avatars">
    <div class="">
      <a href="/community" title="${_(u'WikiHouse Community')}">
        <ul class="right avatars-widget inner-shadow">
          % for item in avatars:
            <li class="right home-avatar">
              <img src="${item}" />
            </li>
          % endfor
        </ul>
      </a>
      <div class="clear">
      </div>
    </div>
  </div>
</%def>
